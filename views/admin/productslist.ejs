<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script
  src="https://code.jquery.com/jquery-3.6.1.js"
  integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
  crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>
<%-include("../partials/top.ejs")%>
<%-include("../partials/header.ejs")%>
<!-- Your content goes here -->
        
        </div>  <div class="container-scroller">
            <!-- partial:partials/_navbar.html -->
          
          
            <div class="container-fluid page-body-wrapper">
            
              
              <div id="right-sidebar" class="settings-panel">
                
                </ul> 
                <a href="/admin/products/add" ><button class="btn btn-info mt-4 mb-4"> Add products</button></a>
                
              
                </div>
              
              <!-- partial -->
              
        
              <link rel="stylesheet" href="//cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
              <script src="//cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
                
               
                <div class="container-fluid" style="width: 100%;">
                    <div class="table-responsive">
                        <div class="table-wrapper">
                          
            
            
            
                            
                                <table id="admin_table" class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>model</th>			
                                            <th>brand</th>			
                                            <th>Stock</th>
                                            <th>price</th>
                                            <th>offerprice</th>

                                            <th>image</th>
                                            <th>Options</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                 <% for(var i = 0 ;i<= result.length-1; i++) {%>             
                <tr>
                    <td><%= i+1%></td>
                    <td><%= result[i].model%></td>
                    <td><%= result[i].brand%></td>
                    <td><%= result[i].stock%></td>
                                        
                    <td><%= result[i].price%></td>
                    <td><%= result[i].offerprice%></td>
                    <td><img src="<%=result[i].mainImage%>" alt="" height="100px"></td>
                    <td>
                       <a href="/admin/products/edit?id=<%=result[i]._id%>">
                        <button class="btn btn-info"> edit</button></a>
                        <button class="btn btn-danger" onclick="deleteProduct('<%=result[i]._id%>')"> Delete</button>
                        
                    </td>
                      
                        
                        
                        <style>
                          /* Basic Page Settings */
        *{
          padding: 0;
          margin: 0;
          box-sizing: border-box;
        }
        body{
          background-color: #eee;
        }
        
        
        /* Custom the checkbox */
        input{
          -webkit-appearance: none;
          appearance: none;
          width: 40px;
          height: 20px;
          background-color: #ddd;
          border-radius: 25px;
          transition: background .6s;
          cursor: pointer;
          position: relative;
        }
        /* Create the toggle */
        input::after{
          content: '';
          width: 1.25rem;
          height: 1.25rem;
          border-radius: 50%;
          background-color: #fff;
          display: block;
          position: absolute;
          top: 50%;
          left: 30%;
          transform: translate(-50%, -50%);
          transition: left .3s;
        }
        /* Change the background when it's checked */
        input:checked{
          background: green;
        }
        /* Change position on checked */
        input:checked::after{
          left: 70%;
        }
        .dataTables_filter input{
            width: 250px;
            height: 40px;
        }
                        </style>
                       
                           
                    
                <%}%>
            <!-- {{/each}} -->
                                    </tbody>
                                </table>
                            
                           
                        </div>
                    </div>
                </div>  
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>   
            
                <script>
                  function deleteProduct(id){
                    console.log("this is id ",id);
                    swal({
                      title: "Are you sure?",
  
                      buttons: true,
                      icon: "warning",
                      dangerMode: true,
                    }).then(willdelete=>{
                       if(willdelete){
                        $.post("/admin//products/delete",{
                        id
                       },(response)=>{
                            if(response){
                              swal({
                                title:"Product deleted",
                               icon: "success",
	                             buttons: true,
	                              closeOnClickOutside:false
  
                     
                              }).then(s=>{
                                if(s){
                                  location.reload()
                                }
                              })
                            }   
                       })
                       }
                       
                       
                    })
                  }
          $(document).ready( function () {
            $('#admin_table').DataTable();
        } );
            
                </script>
        
        
                    
                   
                </div>
            </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>   
        <!-- {{!-- code for search --}} -->
        
        
        
        
        </body>
        
        </html>
    h</div>
    </main>