<!DOCTYPE html>

<%-include("../partials/top.ejs")%>
<script
  src="https://code.jquery.com/jquery-3.6.1.js"
  integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
  crossorigin="anonymous"
></script>
<style>
  * {
    padding: 0;
    margin: 0;
    font-family: "IBM Plex Sans", sans-serif;
  }
  body {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .counter {
    width: 150px;
    margin: auto;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .counter .up {
    width: 5px;
  }
  /* .counter input {
    width: 50px;
    border: 1px solid black;
    line-height: 30px;
    font-size: 20px;
    text-align: center;
    /* background: #0052cc; */
  /* color: #fff; */
  /* appearance: none; */
  /* outline: 0; */
  /* }  */
  .coupon-inputbox {
    outline: none;
    border: 1px solid rgb(216, 215, 215);
    padding: 10px;
    width: 50%;
    margin-right: 5px;
    text-align: center;
  }

  .coupon-input {
    display: flex;
    flex-direction: column;
    /* background-color: #3f51b5; */
  }

  .bb {
    display: none;
  }
</style>
<!-- Modal -->
<div
  class="modal fade"
  id="staticBackdrop"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  tabindex="-1"
  aria-labelledby="staticBackdropLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Add a new Address</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <!-- <form action="/home/addaddress/<%=result._id%>" method="post"> -->
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Name</label>
          <input
            type="text"
            class="form-control"
            id="name"
            name="name"
            required
          />
        </div>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">Mobile</label>
          <input
            type="text"
            class="form-control"
            id="mob"
            name="name"
            required
          />
        </div>

        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label"
            >Address line1</label
          >
          <input
            type="text"
            class="form-control"
            id="ad1"
            name="address1"
            required
          />
        </div>

        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label"
            >Address line2</label
          >
          <input
            type="text"
            class="form-control"
            id="ad2"
            name="address2"
            required
          />
        </div>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">post</label>
          <input
            type="text"
            class="form-control"
            id="post"
            name="post"
            required
          />
        </div>
        <div class="mb-3">
          <label for="exampleInputEmail1" class="form-label">pin</label>
          <input
            type="number"
            class="form-control"
            id="pin"
            name="pin"
            required
          />
        </div>
        <div class="mb-3"></div>
        <input
          type="button"
          onclick="addaddressbtn('<%result._id%>')"
          value="add"
          class="form-control btn btn-primary"
        />
        <!-- </form> -->
      </div>
      <!-- <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div> -->
    </div>
  </div>
</div>
<script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
  crossorigin="anonymous"
></script>
<script
  src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
  integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
  crossorigin="anonymous"
></script>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
  crossorigin="anonymous"
></script>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css"
/>
<%-include("../partials/userHeader.ejs")%>
      <div>
        <div
          class="py-16 px-4 md:px-6 2xl:px-0 flex justify-center items-center 2xl:mx-auto 2xl:container"
        >
          <div class="flex flex-col justify-start items-start w-full space-y-9">
            <div class="flex justify-start flex-col items-start space-y-2">
              <button
                class="flex flex-row items-center text-gray-600 dark:text-white hover:text-gray-500 space-x-1"
              >
                <svg
                  class="fill-stroke"
                  width="14"
                  height="14"
                  viewBox="0 0 14 14"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.91681 7H11.0835"
                    stroke="currentColor"
                    stroke-width="0.666667"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M2.91681 7L5.25014 9.33333"
                    stroke="currentColor"
                    stroke-width="0.666667"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path
                    d="M2.91681 7.00002L5.25014 4.66669"
                    stroke="currentColor"
                    stroke-width="0.666667"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <p class="text-sm leading-none">Back</p>
              </button>

              <p
                class="text-3xl lg:text-4xl font-semibold leading-7 lg:leading-9 text-gray-800 dark:text-gray-50"
              >
                Checkout
              </p>
            </div>

            <div
              class="flex flex-col xl:flex-row justify-center xl:justify-between space-y-6 xl:space-y-0 xl:space-x-6 w-full"
            >
              <div
                class="flex sm:flex-row xl:flex-col justify-center items-center bg-white border-1 dark:bg-gray-800 py-7 sm:py-0 xl:py-10 px-10 xl:w-full"
              >
                <div class="d-flex flex-column items-start w-full space-y-4">
                  <div
                    class="div d-flex flex-column w-100 justify-content-between"
                  >
                    <div class="l d-flex justify-content-between">
                      <p
                        style="display: flex; flex-direction: column"
                        class="text-xl md:text-2xl leading-normal text-gray-800 dark:text-gray-"
                        id="modelname"
                      >
                        <%=result.model%><br>
                        <%if(result.price!=result.offerprice){%>
                          <span class="mt-2" style="font-size: 15px;color:#4BB543 ;">product offer applied successfully</span>
                          <%}%> 
                      </p>
                      <div class="coupon-input">
                        <a id="have" href="#" class="text-end mb-2"
                          >have a promo code.?</a
                        >
                        <div
                          class="i d-flex justify-content-end"
                          id="couponinputbox2"
                        >
                          <input
                            type="text"
                            id="couponinp"
                            class="coupon-inputbox"
                            placeholder="promo"
                            maxlength="5"
                            onkeyup="onInputChange()"
                          />
                          <button
                            class="btn btn-success p-2"
                            id="applyBtn"
                            onclick="couponcheck()"
                            disabled
                          >
                            apply
                          </button>
                          
                        </div>
                        <p
                          style="text-align: right;color:#4BB543 ;  "
                          id="couponMsg"
                          class=""
                        >
                          Coupon applied successfully...
                        </p>
                        <p id="couponMsgerror" class="text-danger">
                          Invalid coupon code
                        </p>
                      </div>
                    </div>

                    <div class="d-flex w-50">
                      <%if(result.price==result.offerprice){%>
                        <!-- <h1 class="text-4xl">₹</h1> -->
                        ₹ <h1
                          class="text-4xl"
                          id="priceone"
                          data-test="<%=result.price%>"
                        >
                          <%=result.price%>
                        </h1>
                        <%}else{%>
                          
                          ₹ <h1 id="priceone" class="text-4xl">  <%=result.offerprice%></h1>
                          <%}%>
                     
                    </div>
                  </div>
                </div>
                <div
                  class="mt-6 sm:mt-0 xl:my-10 xl:px-20 w-52 sm:w-96 xl:w-auto"
                >
                  <img
                    id="mainimg"
                    src="<%=result.mainImage%>"
                    alt="headphones"
                  />
                </div>
                <div class="d-flex">
                  <!-- <div class="counter">
                    <button
                      class="btn w-25 btn-primary me-1"
                      onclick="minus('<%=result.price%>')"
                      id="minusbtn"
                      style="visibility: hidden"
                    >
                      -
                    </button>
                    <input type="text" value="1" id="inputbox" />
                    <button
                      class="btn w-25 btn-primary ms-1"
                      onclick="plus('<%=result.price%>')"
                    >
                      +
                    </button>
                  </div> -->
                </div>
              </div>

              <div
                class="p-8 bg-gray-100 dark:bg-gray-800 flex flex-col lg:w-full xl:w-3/5 d-flex flex-column justify-content-between"
              >
                <div class="addresses">
                  <%if(locals.user.address){%>
                  <form action="">
                    <%for(i=0;i<=user.address.length-1;i++){ %>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="address"
                        class="addresss"
                        id="<%=i%>"
                        onchange="onchanageInput('<%=user.address[i]%>',this)"
                        value="<%=JSON.stringify(user.address[i])%>"
                      />
                      <label
                        class="form-check-label p-4 border-1 w-100 mb-3"
                        for="<%=i%>"
                      >
                        <h6></h6>
                        <h6><%=user.address[i].name%></h6>
                        <h6><%=user.address[i].mobile%></h6>
                        <h6><%=user.address[i].address1%></h6>
                        <h6><%=user.address[i].address2%></h6>
                        <h6><%=user.address[i].post%></h6>

                        <h6><%=user.address[i].pin%></h6>
                      </label>
                    </div>
                    <%}%>
                    <button
                      type="button"
                      style="background-color: #3f51b5"
                      class="btn border border-transparent hover:border-gray-300 dark:bg-white dark:hover:bg-gray-900 dark:text-gray-900 dark:hover:text-white dark:border-transparent bg-gray-900 hover:bg-white text-white hover:text-gray-900 flex justify-center items-center rounded w-full"
                      data-bs-toggle="modal"
                      data-bs-target="#staticBackdrop"
                    >
                      +
                    </button>
                  </form>
                  <%}else{%>
                  <h1>no address found</h1>
                  <button
                    type="button"
                    style="background-color: #3f51b5"
                    class="btn border border-transparent hover:border-gray-300 dark:bg-white dark:hover:bg-gray-900 dark:text-gray-900 dark:hover:text-white dark:border-transparent bg-gray-900 hover:bg-white text-white hover:text-gray-900 flex justify-center items-center rounded w-full"
                    data-bs-toggle="modal"
                    data-bs-target="#staticBackdrop"
                  >
                    +
                  </button>
                  <%}%>
                </div>
                <div>
                  <button
                    style="background-color: #3f51b5"
                    class="btn btn-primary w-100 p-4"
                    onclick="cod('<%=result._id%>')"
                    id="btncod"
                    disabled
                  >
                    <div id="codbtn">
                      <div class="text-base leading-4">
                        Place order and Pay Using COD
                      </div>
                    </div>
                  </button>

                  <div class="flex flex-row justify-center items-center mt-2">
                    <hr class="border w-full" />
                    <p
                      class="flex flex-shrink-0 px-4 text-base leading-4 text-gray-600 dark:text-white"
                    >
                      or
                    </p>
                    <hr class="border w-full" />
                  </div>

                  <form action="/payment" method="post">
                    <div
                      class="fancy-radio-buttons d-flex flex-column align-items-center mt-3 with-image"
                    >
                      <span class="image-container">
                        <input
                          onchange="paymentOnchange()"
                          type="radio"
                          class="payment"
                          id="opt1"
                          name="payment"
                          value="paypal"
                        />
                        <label for="opt1">
                          <img
                            width="150px"
                            src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbQAAABzCAMAAADHcAfMAAAAwFBMVEX///8oO4JGm9sjN4A2ldlFU48ylNlBmdpInNs7l9orPYMTLXyx0O0dM34AH3cmOYEAIngAJXkeNH/S5PWqr8cNKnsAHXYYMH1cpd4SLHzN0d/p8voGJ3rw9vxhbJ3D2/FzsOLe6/f1+f3t7vOCiq+/w9WjyeuSv+dNWpMAGXXf4eqAtuS31O/O0d+EjLDDx9hsdqOWwuh4suOYnrzk5u2zt81lb595gao2R4mnrMVWYpeRmLg0RYdIVpFkqd8AE3QoaZVVAAARtklEQVR4nO1da1vqvBYUiy0VSrkIBWWrgBcU8c5W3Or5///qCEhp05kkvXk5h3nfD/t5DE3b1SQra82abG0JeHgr7Krx/Hb49G92cyn++hfiz3mnpIHO+/H47qp58MV313+3tkOwShWxzaBQdgsacF2j4ZRb9eroYfLFj5Ex+qYtvBYCy7Jsu2gWjyv9r7u7P2bk5izzSmh06OiYLADD67VOfvOAs/RMFnhptlk6+6oBd2WDG7gPtxlexLTZAk7t7eaLHiJzHBVj2uzTbvdfM9zOkdHG4Tb7vSRG+xhvtdEvHW1n4K1o2c0cD77g9o7BPGCfhdvMysmM9mG29sMXPEP2GMedHdfvrniU/+2hydsW+j2Ju6QF0HrJ/xmyRyex0ba3zfO8725gom6FmfnFSG60gvf8FRNGxkBvRRvFsbqDVOhDowmv2Uthsw+HZCfnZ8geB6mMtm3nbLUj5IdY4TbDaiqjFbzbfJ8hezSTOI8BmJGdbqZAbpJ1HG4zSeg8+qid5voM2aOS0HlcWy3XHds98kPuwm2m3ZRGK3TzfIQcgPZBsWC953l7JWQ0ISDyL92a9oHyL3P8xchefJjNHG8PrbhFocPDRlqjFVo5PkIOSDvQ8h1q0E0y/4Qb7WoFi+VGm+b3DNnjTzrncfkS81vVYIzNDrcZpHQe52gc5vYIOSCt87h4iWfqfhICOo/CyL6spzeaW8/tEXIACqLHRie320MxNlsIw5y2iCUMZ4FGwzCUE2jvN+XX7pjRrDWURjNzuz0UY7OFneEDcR57o6cFbm9fnsu1ltzFLO/l9gzZAwXR5yYzj8/HC9y/l2xVllSMBWYHHefxFjuP9dCOeXhz7cmy2951Xo+QA9A+aP41h8xwcDQ2ZdOoGHXPDNBNEv2eZxgubkRjU7M6Dyw3/ub0CDkABtGjM9BHwzuJm5mbJwLdJMF53OrBAYTmu6FLrWa85fQIOQAG0fF81+RWE+NKmaECjGYJbs9jDVoBehbDGpshjeecHiEHoCD6djT3sWxLrSb6c5lBh2twg53H2hBd8IHluN3XnB4hB2CugbUNG6PgLXyPmQHF2PS4Bi6OAQ/wsPxdIw1zDcTcxyfoRtzKa6TpcA2eINfAGOErsiS38Ysyodh5ZGsU8yDzmh61uAYjaAbnCV+SZQSMXxTHwmOnKJJBP8HoJHl5j310e+JOHu++yjN8SbYTZ0b+gSBcA3H7ugJb1JiR0wISVUvhNkO8SrUID5Wx7bx/+TxCDiBEVTH3sQJj2+VFpYPhYoFdTLgGtUd8STbSyrLczPBycvOBySX0SL8ahGsgbl9XIDEveRjrT7/ZPGo2+wfxmWo6XIM9zDWokksyiiQLGD9OT95a1Xqv1Wr1evVqa+dp77tJycR5ZFF7tqaxgHG/Mu6YpllcwDTtzvlVrNSbDtfgGg4d6sEz77GKPqnLf6/VrhNMEbiuU65769KN4e2OiNv1cLz8G/nrk0424fLpTfzdaD0TYCtQD564/OIys0Tz3DKLYZ/dskOlG/3jjohwzzBcLIzqQ93I4xJkdnQL0abTnaqHTexUR5/v3vMMEZ6/Qxy2nchfnQv14jm7iP7OuPDDcmR2JKw4RpEEe+vB2TZJDcxLNw4+L2dFYAcTnFpEVTzdeYSpQ2JewMgzpyXhLRvtxQ9O0YLaW6UXZnDmbqv4evuwBsjfSBKuAXMeScwrauTBnTSZY5mLLQJM5QVD+DpEVRLiaJE3s0ecR3GHcNroKvKmXmFI3Bq/b+ypKkPTHuzZ/xkJcTDOB3MeRT+kIs3jzFGcDyi4gQj2rcU1wM5jnXgLeCcuth++0MBy4C06A5zK86/1iMkrbbkPeovnDp9Qe0WMRi7HoljFUKt+SYPBMJ8Gt6HRAlfS4RoQomobu6qXjANUDrY6rWtx8hojnMpr+xd6g59IV8r8OsVTh+PP35ioypxHRicJRyrPouW20Gp30M0I9Y3cpKIwFeOwlOviR3gh1gjFQ06qmpS81gMyirvrXwlPxtRJmmOAcxau57fARFUWs2dkkdB7fNdld5lwjxjqG11Kj2tAGHFTRvoPLoEv+iRz+MEEbIIrQ6TML1I9Xl3vFIjziCOJYzbrBeInf3SmxlU3qr4xUVVYbzFRFQelJmxydGt+m8FOWo55sG+8K+ztU5tNMR2wfLK+QcI1gEGpCkuBBma0A02ZBI5g39BNKgq31YYPCZeNKZ321rPj4Dk1xTzY9xTOjw4lEQ3r2HMMZGhjcA22OEVkHaLoF9PXBQT6RvOnuN4SoioISj3+5ZzWmt88vc0KvYAjijckbMWla247cEnGNYherNnh057f/CC9zUJ963ANCFG1JjiPw+lhlZtjnQB9SV1/I/SNa0NqZEMyw2tuKxgpIFwDMSh1UOlIPMK1Dw5d+HgI9a3DNSCcj/LN6RLT6ezh5KVRLctGkB/COEld6FYQdg94R0LiNY94/m6EkvA4PWZ1mkefuKqcjd8VVFXfDUlfMyXkXZC3KiaBMNfg4+Ncotvtlj1HQQr3g8unGVRyFIyQWgKeHwm3YQe6LW6YokSIqpYdgIoU7tdcU355HATzLphrIDiP+DnjofaZLyVegP/yjEajoe5OoCr/hUO8ioIiD3iqr4edqgyqnPyBJmFFzqFZFBDMu2hxDRi5KgYaq6HBdt5zOK228XL79PelXOvKfRWBJIsXXZRyvcRaUU6Y+kycx1jw1xiJRSy7aJaOx+PjTlFVFBDMu6TgGsSBP/uQ+NEHjFb3+mblXnz4NG3pAik4rnD4IhI6ZreLVEAWtI8B/yXyydEyS2d+FEPu04TzLuiSWYliBVBfjQy28rndV2FcPB5KKuJEkiwM2YCgyD/sUlUFrktSUazgS/4cGVSMxDLfhbiTbPcQ4jlAroHgPLJMiz58DZEH4jkaNcDr4vt0V6zevoHfVU/kHU3w5OiJJLHkoli+zVZRR0bTslB05ZxOy6G8C+QaCJe7TiGKtUDDpyWQykTnFTKEaEQsmi2D9SHOidBqF06Oxq54tTSiWAv4GktsdbSP0QNvnTGrhfIuuYtizV+KsZqPcZa54BGi8taUrIBR/iTclbiNcKMTvKtvR3bhaf2QNTWAjFkqnMW0S4L8yS8QxSoYDX8BcvG+lpPFSSljlCSL191w1nUfh1BbkU14SlGsgM0Ia0Eim0V2iMG8C3STshXFcnZ9m+GVx21w2h/pG5BkW+h7CAdFsBME9uApdQ0CUx8Jh0nkRTRIsvmLYvUCsQs8btoyvhv+CSDJQqqlG+T43eJMLqjWSieKFVR6xEHHooycSgo/Ai0g10AUxUrhPBoXgW8dS5HI+f2wLs7tRRviTysQFCE7xDqoZU0jimUFY4DYDZHz++G+Tsk1yE4Uy+3tBBcVHLeABFYf0NCQJAvvsuubhDAMHJR9Tx7gtcz74OOoDRAFnJtDW2cdXQMc2FPD6Hrh/TL08FSCB8h3gfwPSIJeMyIIw6CFPpmkA80yO+F3B6c6RU0G9F2C/EktUazXJKJYrlPfFSceOBZYDccKiI4Hky4TGEBZkbYIw0AMhSxAuAYqi9lmRzAH9h1ZDccKcCCpuAbiReM7j4bTq91GKBqQd6ws6EWEdEySLaCP69PPJLX7kVAIfytKi9nnES4C1hxT1Yaq8i6Qa5BGFMs1nHKv/XqNPmC4pCkr1tDOHpNk4dr76ebg3IIBagu2YopiWZZdLJqdM8QXhw6/smINjrTA3yHXQFcUq+C1ekHU67VaYfQ0uyHcXszuVh2PgXJ5Is9hiUvoHi6ojHt410I2G1wUyy6GMK9VKr2fV5gUJyxaY2WJK6DJWc010BTFangP+5P9FSaTyeWjgomNvnbVkoaSLm4kVrjEKwq31SeUYdAlo5wVCNqlSjOIvqoaEGbSVEsa2iaEnEc4fIXv5gk7j41R3PJFmP9WiQmihZDJRsLPaz7/YuI4lVpgolixhQqU7G4EFKQK5l1ScA1cJ+4TwEB8gIiNgXb2bB2E8+OHp4MZBm6VDXLsPMaXtoW+OREiWQMtWbGJqlgUi5WmSYC8UKXR0CaR1lbAtHTvhrA2iTIDy6aw0jQOeCGxmj0CNKeaKq5BClEsKSBlKpLNFH+ELE37xlQ/rKbRoKffxBHFkgLHNhQDFv4oLtcgliiWDJhporgONANkWc1BStUgetQGsUSxZMBGg1XYayAvKPSb5AdwqUYIADaaYsRiFiptrs/1q/Ly3liiWDLgTbp8xOIpNdi3DtcAq0skELnCMX755hrGE5kg11aMI95kB99grkEC4UZsNPnmGnYe6jt7USwZYN6Yl0l8YAJ/EmF+rDHEuelorw16CVaKK+Y+NIA9GqkngqQ3BaJqcq4BE8WSAV+px+epIS5ml/XNqr0FyPKuMUWxJCBcA8kBC4SMrOIapBTFkgG/UP7RD2CEQ1otqMn2K8vSQUzXQBF9QiAbvmPWnlWxZcQ1YLoGMpAyDoeIUQ9fSR5PFvnSmh/lmYWYolgyECZekcgJNlkVW2yuASa91bbig42CLlwfb6gqjDTypUP3o6GQBc7jiWLJQNVFoO4P5TyGtnbJuQaJZG1pjqc8imy8hreU8+9KHVcNQgsNhfC3klDWluZ4zCiFrt+hWTwlUVXvAC6p3gMFLXJq1P6FzDZ5qnJSs9xxHShPUOehkCXiiWJJwfmTtlUJOXxH77KKUiXXQHAeMVcwQeRxi9cmzkOQ1dHDzeVwMHycTJ+MuoyHruhbdcybW5fHYGKKYslB8gXbc9KWeV9pHgwGg4NmZWxLa7KDfSM3SVMUq5voeE/MVf2E4bXqtWqt1us6ck4KE+T6BM/ZLqE6mTSmKJYc0uqbeXHaHEWVWkVGXINeMgnNDArklY6r4pw3RzWxk3Uo2elMafnl0b5h4kbkGhBF1WQnjbMkeCy0FZ0Q+v8S6jQg5hokch63eBI8DkJ9J+cauEayRxhoyM6poDxEQzo/SinoC+DXnPQgC0W9tZ7R4nIN8GebWF6fnmeiD/XBUJJKfGkoZAlcIZ1YXj+DoRbsW+sALhxJSn4MmvowQxXUKvHcSTXUR93EEsXSQAarmpJrIAZriPOY+MBBUiKGgSlUyhN8uZMarR6MII4olhbOUh8H+21cAx8n+hOkB7XvNBxXWKpWQNWDUeiLYukiRimwXVL1raVrkBXXYI2RbgF3dQYlyjUcV3IqQIMnT9fIjGvgY6Ch7LLsxGyilrG5BjjGm+7kYxa8F/q42NuCqtT48K8QcGG/KhSyBBHFOk7xwJoSdFaxD92MUNIUhVjEVDh+fEm+XwODZ43dmuNNcCrPUEQOP3CDt9c1rePs4x3ApQctgU6784e4GUqiqtYZCmnPZjpU1QMb1dsBSeWpHdcBpsyxtJ0A4jymO5tJLYVrmfPPAqby1FwDoTf8TuuJIo8BzKQSSm5rd5EXh1mWmjJl/oInR08riEM8dDNRuDiAc6mEkmW+L0YLLBsOpq0h10AkUkKGgJf+uMEhV74yeo3PDcU+mOao4ogPIsHZlnAUAsDbNCv9ufB9rnxl+cWIyAsygzMzGGlWZDcy+U9ZRLetXlU0cHl7ASQ9jXJ7tB7Gh1Wx7wvlHPdIhJQ4gyuMilm0I0g90OY4ekdCc/PzZdZXL5nhWqqibYZX07Fwex8tovc23Jt9/rf4f/6PrM7IGu4dVntdr2G4Bdd1jUU14mgWYgLc7IUxVfeNVeaiQkoU/UoEV8nC4xEcnHXm73yp7jg/8sc2zePwxY/ErkU6UVNokNeB9RJM9q7/vr063bK7c3gym6R/OWTvrhEK+RoMmpXz407Jsq1S5/7uKnGc5X8JaBks6IVCNvgmEG9fecLTBt8IrBWChJQ2+Ckg3j4SUtrgh4CUw0MhpQ1+CLC3Xyhn5LBvkAOItw+FlDb4GSA5cSyktMGPwAAfCWvIahY3+GYQZcCLnxIK2SAKIn7FhJQ2+AEg3n6Ccv4NvgzkBBl59eAG34pr7O33NqGQnwvi7auqBzf4RgywcgXWlN7gZ4CcIKOqHtzgO4EFsWRCSht8O2DQ0dNnhWzwHQBEv8bT/+2C9l/anKQCQhyqYwAAAABJRU5ErkJggg=="
                            alt=""
                          />
                        </label>
                        <label for="opt1" class="image-bg"></label>
                      </span>

                      <span class="image-container">
                        <input
                          type="radio"
                          id="opt2"
                          class="payment"
                          name="payment"
                          value="razorpay"
                          onchange="paymentOnchange()"
                        />
                        <label for="opt2">
                          <img
                            width="150px"
                            src="data:image/png;base64,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"
                            alt=""
                          />
                        </label>
                        <label for="opt2" class="image-bg"></label>
                      </span>
                      <br /><br />
                      <input type="hidden" id="total" name="total" />
                      <input type="hidden" id="quantity" name="quantity" />
                      <input type="hidden" id="model" name="model" />
                      <input
                        type="hidden"
                        id="id"
                        name="id"
                        value="<%=result._id%>"
                      />

                      <input
                        role="button"
                        id="paynowbtn"
                        onclick="placeorderonline('<%=result._id%>')"
                        type="button"
                        value="pay now"
                        class="btn btn-primary"
                        disabled
                      />
                    </div>
                  </form>
                </div>

                <!-- Modal -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Button trigger modal -->
      <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

      <!-- <script src="https://cpwebassets.codepen.io/assets/common/stopExecutionOnTimeout-1b93190375e9ccc259df3a57c1abc0e64599724ae30d7ea4c6877eb615f89387.js"></script> -->

      <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
      <script>
function removeCoupon(){
  location.reload()
  code=$("#couponinp").val()
  $.post("/home/removecoupon",{
code
  },()=>{

  })
}

        function onInputChange() {
          if ($("#couponinp").val().length > 4) {
            $("#applyBtn").prop("disabled", false);
          } else {
            $("#applyBtn").prop("disabled", true);
          }
        }
        $(document).ready(() => {
          $("#removeBtn").hide();
        });
        function couponcheck() {
          code = $("#couponinp").val();
          $.post(
            "/home/couponcheck",
            {
              code,
            },
            (response) => {
              console.log(response.result.discount);
              couponresponse=response.result.discount
              couponcode=response.result.ID
              var price = $("#priceone").text();
              if (response.couponFound == true) {
                $("#priceone").text(Math.ceil($("#priceone").text()-$("#priceone").text()*response.result.discount/100))
                console.log(response);
                couponResult=response.result
                $("#removeBtn").show();
                $("#applyBtn").hide();
                $("#couponMsg").css("visibility", "visible");
                $("#couponMsgerror").css("visibility", "hidden");
              
              } else if(response.couponFound==false){
                $("#couponMsgerror").css("visibility", "visible");
                $("#couponMsg").css("visibility", "hidden");
              }
            }
          );
        }
        function onchanageInput(x, y) {
          address = y.value;
          $("#btncod").prop("disabled", false);
        }

        function paymentOnchange() {
          $("#paynowbtn").prop("disabled", false);
        }
        $(document).ready(() => {
          // console.log($(".addresss:checked").val());
          $("#couponMsg").css("visibility", "hidden");
          $("#couponMsgerror").css("visibility", "hidden");
          var totalprice = $("#priceone").text();
          var modelname = $("#modelname").text();
          var q = $("#inputbox").val();
          $("#total").val(totalprice);
          $("#model").val(modelname);
          $("#quantity").val(q);
          $("#id").val();
        });

        function paypal(x) {
          console.log(x);
          let address1 = Number($(`.form-check-input:checked`).val());
          let totalprice = document.getElementById("priceone").value();
          // let quantity = document.getElementById("quantity").value();
          let model = document.getElementById("modelname").value();
          $.post("/payment", { totalprice: "152145" });
        }

        function plus(a) {
          var totalprice = $("#priceone").text();
          var modelname = $("#modelname").text();
          var q = $("#inputbox").val();
          $("#total").val(totalprice);
          $("#model").val(modelname);
          $("#quantity").val(q);
          $("#id").val();
          let input = $("#inputbox").val();

          $("#inputbox").val(parseInt(input) + 1);
          let news = $("#inputbox").val();
          if (news != Number(1)) {
            $("#minusbtn").css("visibility", "visible");
          }
          $("#priceone").text(Number(a) * Number(news));
          $("#total").val(Number(a) * Number(news));
        }

        function minus(a) {
          var totalprice = $("#priceone").text();
          var modelname = $("#modelname").text();
          var q = $("#inputbox").val();
          $("#total").val(totalprice);
          $("#model").val(modelname);
          $("#quantity").val(q);
          $("#id").val();

          let input = $("#inputbox").val();

          $("#inputbox").val(parseInt(input) - 1);
          let news = $("#inputbox").val();
          if (news == Number(1)) {
            $("#minusbtn").css("visibility", "hidden");
          }
          $("#priceone").text(Number(a) * Number(news));
          $("#total").val(Number(a) * Number(news));
        }

         function placeorderonline(id) {
          if(typeof(couponresponse)!="undefined"){
            discount=couponresponse
            ID=couponcode
            
          }
          else{
             discount=0
             ID=null
          }
          $.post(
            "/payment",
            {
              id: id,
              discount,
              ID,
              quantity: $("#inputbox").val(),
              payment: $(".payment:checked").val(),
              address: address,
            },
            (res) => {
              if (res.paypal) {
                location.href = res.paypal;
              } else {
                razorPayPayment(res);
              }
            }
          );
          function razorPayPayment(order) {
            var options = {
              key: "rzp_test_kwZGFuI0hWeY2V", // Enter the Key ID generated from the Dashboard
              amount: order.amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
              currency: "INR",
              name: "steller",
              description: "Test Transaction",
              image: "https://example.com/your_logo",
              order_id: order.id, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
              handler: function (response) {
                // alert(response.razorpay_payment_id);
                // alert(response.razorpay_order_id);
                // alert(response.razorpay_signature);

                varifyPayment(response, order);
              },
              prefill: {
                name: "Gaurav Kumar",
                email: "gaurav.kumar@example.com",
                contact: "9999999999",
              },
              notes: {
                address: "Razorpay Corporate Office",
              },
              theme: {
                color: "#3399cc",
              },
            };
            var rzp1 = new Razorpay(options);
            rzp1.open();
          }
        }
        function varifyPayment(payment, order) {
          $.post(
            "/varifyPayment",
            {
              payment,
              order,
            },
            () => {}
          );
        }

        function addaddressbtn(id) {
          $.post(
            "/home/addaddress/<%=result._id%>",
            {
              name: $("#name").val(),
              address1: $("#ad1").val(),
              address1: $("#ad2").val(),
              post: $("#post").val(),
              pin: $("#pin").val(),
              mobile: $("#mob").val(),
            },
            (data) => {
              if (data.empty) {
                swal("All fields must be filled!.");
              } else {
                swal("address added!.").then((value) => {
                  location.reload();
                });
              }

              console.log(data);
            }
          );
        }

        function cod(x) {
          address = $(`.form-check-input:checked`).val();
          if(typeof(couponresponse)!="undefined"){
            discount=couponresponse
            ID=couponcode
          }
          else{
             discount=null
             ID=null
          }
          console.log(discount);
          // console.log(address);
          $.post(
            "/home/orderconfirm",
            {
              productid: x,
              quantity: Number($("#inputbox").val()),
              address,
              discount,
              ID,
              date: new Date(),
              price: Number($("#priceone").text()),
            },
            (d) => {
              console.log(d);
            }
          );
          swal("Order placed!", "Your Order placed successfully!", "success");
        }
      </script>
      <script id="rendered-js">
        function imgchange(img) {
          document.getElementById("mainimg").src = img;
        }

        let closeIcon = document.getElementById("closeIcon");
        let openIcon = document.getElementById("openIcon");
        let dropdown = document.getElementById("dropdown");
        let text = document.getElementById("changetext");
        // more free and premium Tailwind CSS components at https://tailwinduikit.com/
        const showMenu = (flag) => {
          if (flag) {
            closeIcon.classList.toggle("hidden");
            openIcon.classList.toggle("hidden");
            dropdown.classList.toggle("hidden");
          } else {
            closeIcon.classList.toggle("hidden");
            openIcon.classList.toggle("hidden");
            dropdown.classList.toggle("hidden");
          }
        };

        const changeText = (country) => {
          text.innerHTML = country;
          closeIcon.classList.toggle("hidden");
          openIcon.classList.toggle("hidden");
          dropdown.classList.toggle("hidden");
        };
      </script>
    </div>
  </main>
</div>
